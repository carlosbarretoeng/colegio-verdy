<div class="space-y-4">
  <!-- Header com título e botão de novo -->
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">{{ config.title }}</h1>
    <button
      (click)="goToNew()"
      class="px-4 py-2 font-medium text-white transition rounded-lg bg-primary-500 hover:bg-primary-600"
    >
      <i class="mr-2 fas fa-plus"></i>
      {{ config.newButtonLabel || 'Novo' }}
    </button>
  </div>

  <!-- Loading -->
  @if (isLoading) {
    <div class="flex items-center justify-center py-8">
      <div class="animate-spin">
        <i class="text-3xl fas fa-spinner text-primary-500"></i>
      </div>
    </div>
  }

  <!-- Tabela -->
  @if (!isLoading) {
    <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
      @if (items.length > 0) {
        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
          <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
            <tr>
              @for (column of config.columns; track column.key) {
                <th scope="col" class="px-6 py-3" [style.width]="column.width">
                  {{ column.label }}
                </th>
              }
              <th scope="col" class="px-6 py-3">Ações</th>
            </tr>
          </thead>
          <tbody>
            @for (item of items; track item.id) {
              <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
                @for (column of config.columns; track column.key) {
                  <td class="px-6 py-4">
                    {{ formatCell(column, item[column.key]) }}
                  </td>
                }
                <td class="px-6 py-4 space-x-2">
                  <button
                    (click)="goToEdit(item)"
                    class="font-medium text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-200"
                    title="Editar"
                  >
                    <i class="fas fa-edit"></i>
                  </button>
                  <button
                    (click)="confirmDelete(item)"
                    class="font-medium text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-200"
                    title="Deletar"
                  >
                    <i class="fas fa-trash"></i>
                  </button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      } @else {
        <div class="p-8 text-center text-gray-500 dark:text-gray-400">
          <i class="mb-4 text-4xl fas fa-inbox"></i>
          <p>Nenhum registro encontrado</p>
        </div>
      }
    </div>
  }

  <!-- Modal de Delete -->
  @if (showDeleteModal) {
    <div class="fixed inset-0 z-40 flex items-center justify-center bg-black/50">
      <div class="w-full max-w-md p-6 mx-4 bg-white rounded-lg shadow-lg dark:bg-gray-800">
        <h3 class="mb-2 text-lg font-bold text-gray-900 dark:text-white">
          Confirmar exclusão
        </h3>
        <p class="mb-6 text-gray-600 dark:text-gray-400">
          Tem certeza que deseja deletar este registro? Esta ação não pode ser desfeita.
        </p>
        <div class="flex justify-end gap-3">
          <button
            (click)="cancelDelete()"
            class="px-4 py-2 font-medium text-gray-700 transition bg-gray-200 rounded-lg dark:text-gray-300 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"
          >
            Cancelar
          </button>
          <button
            (click)="executeDelete()"
            class="px-4 py-2 font-medium text-white transition bg-red-600 rounded-lg hover:bg-red-700"
          >
            <i class="mr-2 fas fa-trash"></i>
            Deletar
          </button>
        </div>
      </div>
    </div>
  }
</div>
